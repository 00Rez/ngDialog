(function(n,t){"use strict";var f=t.module("ngDialog",[]),i=t.element,r=t.isDefined,u=(document.body||document.documentElement).style,o=r(u.animation)||r(u.WebkitAnimation)||r(u.MozAnimation)||r(u.MsAnimation)||r(u.OAnimation),e="animationend webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend",s=!1;f.provider("ngDialog",function(){var c=this.defaults={className:"ngdialog-theme-default",plain:!1,showClose:!0,closeByDocument:!0,closeByEscape:!0,appendTo:!1};this.setForceBodyReload=function(n){s=n||!1};var u=0,r=0,f,h={};this.$get=["$document","$templateCache","$compile","$q","$http","$rootScope","$timeout","$window",function(s,l,a,v,y,p,w,b){var k=s.find("body"),d,g;return c.forceBodyReload&&p.$on("$locationChangeSuccess",function(){k=s.find("body")}),d={onDocumentKeydown:function(n){n.keyCode===27&&g.close("$escape")},setBodyPadding:function(n){var t=parseInt(k.css("padding-right")||0,10);k.css("padding-right",t+n+"px");k.data("ng-dialog-original-padding",t)},resetBodyPadding:function(){var n=k.data("ng-dialog-original-padding");n?k.css("padding-right",n+"px"):k.css("padding-right","")},closeDialog:function(t,i){var u=t.attr("id");typeof n.Hammer!="undefined"?n.Hammer(t[0]).off("tap",f):t.unbind("click");r===1&&k.unbind("keydown");t.hasClass("ngdialog-closing")||(r-=1);o?t.unbind(e).bind(e,function(){t.scope().$destroy();t.remove();r===0&&(k.removeClass("ngdialog-open"),d.resetBodyPadding())}).addClass("ngdialog-closing"):(t.scope().$destroy(),t.remove(),r===0&&(k.removeClass("ngdialog-open"),d.resetBodyPadding()));h[u]&&(h[u].resolve({id:u,value:i,$dialog:t,remainingDialogs:r}),delete h[u]);p.$broadcast("ngDialog.closed",t)}},g={open:function(e){function ut(n){return n?t.isString(n)&&o.plain?n:l.get(n)||y.get(n,{cache:!0}):"Empty template"}var tt=this,o=t.copy(c),rt,nt,s,it;return e=e||{},t.extend(o,e),u+=1,tt.latestID="ngdialog"+u,h[tt.latestID]=rt=v.defer(),nt=t.isObject(o.scope)?o.scope.$new():p.$new(),v.when(ut(o.template)).then(function(e){if(e=t.isString(e)?e:e.data&&t.isString(e.data)?e.data:"",l.put(o.template,e),o.showClose&&(e+='<div class="ngdialog-close"><\/div>'),tt.$result=s=i('<div id="ngdialog'+u+'" class="ngdialog"><\/div>'),s.html('<div class="ngdialog-overlay"><\/div><div class="ngdialog-content">'+e+"<\/div>"),o.controller&&t.isString(o.controller)&&s.attr("ng-controller",o.controller),o.className&&s.addClass(o.className),o.data&&t.isString(o.data)&&(nt.ngDialogData=o.data.replace(/^\s*/,"")[0]==="{"?t.fromJson(o.data):o.data),it=o.appendTo&&t.isString(o.appendTo)?t.element(document.querySelector(o.appendTo)):k,nt.closeThisDialog=function(n){d.closeDialog(s,n)},w(function(){var t,n;a(s)(nt);t=b.innerWidth-k.prop("clientWidth");k.addClass("ngdialog-open");n=t-(b.innerWidth-k.prop("clientWidth"));n>0&&d.setBodyPadding(n);it.append(s);p.$broadcast("ngDialog.opened",s)}),o.closeByEscape&&k.bind("keydown",d.onDocumentKeydown),f=function(n){var t=o.closeByDocument?i(n.target).hasClass("ngdialog-overlay"):!1,r=i(n.target).hasClass("ngdialog-close");(t||r)&&g.close(s.attr("id"),"$document")},typeof n.Hammer!="undefined")n.Hammer(s[0]).on("tap",f);else s.bind("click",f);return r+=1,g}),{id:"ngdialog"+u,closePromise:rt.promise,close:function(n){d.closeDialog(s,n)}}},openConfirm:function(n){var r=v.defer(),i={closeByEscape:!1,closeByDocument:!1},u;return t.extend(i,n),i.scope=t.isObject(i.scope)?i.scope.$new():p.$new(),i.scope.confirm=function(n){r.resolve(n);u.close(n)},u=g.open(i),u.closePromise.then(function(n){n?r.reject(n.value):r.reject()}),r.promise},close:function(n,t){var r=i(document.getElementById(n));return r.length?d.closeDialog(r,t):g.closeAll(t),g},closeAll:function(n){var r=document.querySelectorAll(".ngdialog");t.forEach(r,function(t){d.closeDialog(i(t),n)})}},g}]});f.directive("ngDialog",["ngDialog",function(n){return{restrict:"A",scope:{ngDialogScope:"="},link:function(i,r,u){r.on("click",function(r){r.preventDefault();var f=t.isDefined(i.ngDialogScope)?i.ngDialogScope:"noScope";t.isDefined(u.ngDialogClosePrevious)&&n.close(u.ngDialogClosePrevious);n.open({template:u.ngDialog,className:u.ngDialogClass,controller:u.ngDialogController,scope:f,data:u.ngDialogData,showClose:u.ngDialogShowClose==="false"?!1:!0,closeByDocument:u.ngDialogCloseByDocument==="false"?!1:!0,closeByEscape:u.ngDialogCloseByEscape==="false"?!1:!0})})}}}])})(window,window.angular);
/*
//# sourceMappingURL=ngDialog.min.js.map
*/