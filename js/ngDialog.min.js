(function(n,t){"use strict";var f=t.module("ngDialog",[]),i=t.element,r=t.isDefined,u=(document.body||document.documentElement).style,o=r(u.animation)||r(u.WebkitAnimation)||r(u.MozAnimation)||r(u.MsAnimation)||r(u.OAnimation),e="animationend webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend";f.provider("ngDialog",function(){var u=this.defaults={className:"ngdialog-theme-default",plain:!1,showClose:!0,closeByDocument:!0,closeByEscape:!0},n=0,r=0;this.$get=["$document","$templateCache","$compile","$q","$http","$rootScope","$timeout",function(f,s,h,c,l,a,v){var p=f.find("body"),w={onDocumentKeyup:function(n){n.keyCode===27&&y.close()},closeDialog:function(n){n.unbind("click");r===1&&p.unbind("keyup").removeClass("ngdialog-open");r-=1;o?n.unbind(e).bind(e,function(){n.remove()}).addClass("ngdialog-closing"):n.remove();a.$broadcast("ngDialog.closed",n)}},y={open:function(f){function d(n){return n?t.isString(n)&&e.plain?n:s.get(n)||l.get(n,{cache:!0}):"Empty template"}var k=this,e=t.copy(u),b,o;f=f||{};t.extend(e,f);n+=1;k.latestID="ngdialog"+n;b=t.isObject(e.scope)?e.scope.$new():a.$new();c.when(d(e.template)).then(function(u){return u=t.isString(u)?u:u.data&&t.isString(u.data)?u.data:"",s.put(e.template,u),e.showClose&&(u+='<div class="ngdialog-close"><\/div>'),k.$result=o=i('<div id="ngdialog'+n+'" class="ngdialog"><\/div>'),o.html('<div class="ngdialog-overlay"><\/div><div class="ngdialog-content">'+u+"<\/div>"),e.controller&&t.isString(e.controller)&&o.attr("ng-controller",e.controller),e.className&&o.addClass(e.className),e.data&&t.isString(e.data)&&(b.ngDialogData=e.data.replace(/^\s*/,"")[0]==="{"?t.fromJson(e.data):e.data),v(function(){h(o)(b)}),b.$on("$destroy",function(){o.remove()}),p.addClass("ngdialog-open").append(o),e.closeByEscape&&p.bind("keyup",w.onDocumentKeyup),e.closeByDocument&&o.bind("click",function(n){var t=i(n.target).hasClass("ngdialog-overlay"),r=i(n.target).hasClass("ngdialog-close");(t||r)&&y.close(o.attr("id"))}),r+=1,a.$broadcast("ngDialog.opened",o),y})},close:function(n){var t=i(document.getElementById(n));return t.length?w.closeDialog(t):y.closeAll(),y},closeAll:function(){var n=document.querySelectorAll(".ngdialog");t.forEach(n,function(n){w.closeDialog(i(n))})}};return y}]});f.directive("ngDialog",["ngDialog",function(n){return{restrict:"A",link:function(i,r,u){r.on("click",function(i){i.preventDefault();t.isDefined(u.ngDialogClosePrevious)&&n.close(u.ngDialogClosePrevious);n.open({template:u.ngDialog,className:u.ngDialogClass,controller:u.ngDialogController,scope:u.ngDialogScope,data:u.ngDialogData,showClose:u.ngDialogShowClose==="false"?!1:!0,closeByDocument:u.ngDialogCloseByDocument==="false"?!1:!0,closeByEscape:u.ngDialogCloseByKeyup==="false"?!1:!0})})}}}])})(window,window.angular);